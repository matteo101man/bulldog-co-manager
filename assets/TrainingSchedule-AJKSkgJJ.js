import{r as g,j as e}from"./react-vendor-C8iBsMnn.js";import{s as k,d as A}from"./trainingEventService-Cj0evaLQ.js";import"./vendor-C6jWcdt9.js";import"./firebase-vendor-u2jlvS72.js";import"./index-BPjhbv6F.js";function J({onSelectEvent:f,onAddEvent:v,onBack:j}){const[h,N]=g.useState([]),[D,p]=g.useState(!0);g.useEffect(()=>{const n=k(t=>{N(t),p(!1)},t=>{console.error("Error in training events subscription:",t),alert(`Error loading events: ${t.message}`),p(!1)});return()=>{n()}},[]);async function E(n,t){if(confirm(`Are you sure you want to delete "${t}"?`))try{await A(n)}catch(r){console.error("Error deleting event:",r),alert(`Error deleting event: ${r instanceof Error?r.message:"Unknown error"}`)}}function l(n){const[t,r,s]=n.split("-").map(Number);return new Date(t,r-1,s)}function c(n){const t=new Date(n);return t.setHours(0,0,0,0),t}function d(n){const t=l(n),r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s=["January","February","March","April","May","June","July","August","September","October","November","December"];return`${r[t.getDay()]}, ${s[t.getMonth()]} ${t.getDate()}, ${t.getFullYear()}`}const b=c(new Date),m=h.filter(n=>c(l(n.date)).getTime()>=b.getTime()),u=h.filter(n=>c(l(n.date)).getTime()<b.getTime());function w(n){const t=new Map;return n.forEach(r=>{const s=r.date;t.has(s)||t.set(s,[]),t.get(s).push(r)}),t}function T(n){switch(n){case"complete":return e.jsx("span",{className:"text-green-600 text-xl font-bold",children:"✓"});case"in-progress":return e.jsx("span",{className:"text-yellow-600 text-xl font-bold",children:"◐"});case"issues":return e.jsx("span",{className:"text-red-600 text-xl font-bold",children:"!"})}}function y(n,t=!1){const r=w(n),s=Array.from(r.keys()).sort((o,i)=>t?i.localeCompare(o):o.localeCompare(i));return s.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:t?"No past events":"No upcoming events"}):e.jsx("div",{className:"space-y-6",children:s.map(o=>{const i=r.get(o),x=i.find(a=>a.endDate),$=x&&x.endDate?`${d(o)} - ${d(x.endDate)}`:d(o);return e.jsxs("div",{children:[e.jsx("div",{className:"bg-gray-100 border-b-2 border-gray-300 px-4 py-2 mb-2 rounded-t-lg",children:e.jsx("h3",{className:"font-bold text-gray-900 text-sm",children:$})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:i.map(a=>e.jsxs("div",{className:`flex items-center border-b border-gray-100 last:border-b-0 ${t?"opacity-60":""}`,children:[e.jsx("button",{onClick:()=>f(a.id),className:"flex-1 px-4 py-3 text-left hover:bg-gray-50 active:bg-gray-100 transition-colors touch-manipulation",children:e.jsx("span",{className:"font-medium text-gray-900 block",children:a.name})}),e.jsx("div",{className:"px-4 py-3 flex items-center justify-center min-w-[50px]",children:T(a.planningStatus)}),e.jsx("button",{onClick:S=>{S.stopPropagation(),E(a.id,a.name)},className:"px-4 py-3 text-red-600 hover:bg-red-50 active:bg-red-100 transition-colors touch-manipulation",style:{minHeight:"44px",minWidth:"44px"},children:"×"})]},a.id))})]},o)})})}return e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-safe-area-inset-bottom",children:[e.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-10 safe-area-inset-top",children:e.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Training Schedule"}),e.jsx("button",{onClick:j,className:"text-sm text-blue-600 font-medium touch-manipulation",style:{minHeight:"44px",minWidth:"44px"},children:"Home"})]})}),e.jsx("main",{className:"px-4 py-4",children:D?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4",children:e.jsx("button",{onClick:v,className:"w-full py-3 px-4 rounded-lg font-semibold bg-blue-600 text-white hover:bg-blue-700 active:bg-blue-800 touch-manipulation min-h-[44px]",children:"Add Event"})}),m.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Upcoming Events"}),y(m,!1)]}),u.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Past Events"}),y(u,!0)]}),m.length===0&&u.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No training events. Add one to get started!"})]})})]})}export{J as default};
