import{r as a,j as e}from"./react-vendor-C8iBsMnn.js";import{s as M,g as N}from"./cadetService-BXy_--2f.js";import"./vendor-C6jWcdt9.js";import"./firebase-vendor-u2jlvS72.js";import"./index-DKB6D4ej.js";const j=["Alpha","Bravo","Charlie","Ranger","Headquarters Company"];function W({onSelectCadet:C,onBack:w,onAddCadet:i}){const[v,d]=a.useState([]),[S,o]=a.useState(!0),[n,k]=a.useState(""),[u,h]=a.useState(!1),[x,E]=a.useState(new Set(j)),[g,F]=a.useState(!0),[p,L]=a.useState(!0);a.useEffect(()=>{o(!0);const t=M("Master",s=>{d(s),o(!1)},s=>{console.error("Error in cadets subscription:",s),N("Master").then(d).catch(r=>{console.error("Error loading cadets:",r),alert(`Error loading cadets: ${r instanceof Error?r.message:"Unknown error"}`)}).finally(()=>o(!1))});return N("Master").then(d).catch(s=>{console.error("Error loading cadets:",s),alert(`Error loading cadets: ${s instanceof Error?s.message:"Unknown error"}`)}).finally(()=>o(!1)),()=>{t()}},[]);const U=t=>{E(s=>{const r=new Set(s);return r.has(t)?r.delete(t):r.add(t),r})},m=v.filter(t=>{if(!x.has(t.company))return!1;if(!n.trim())return!0;const s=n.toLowerCase().trim(),r=`${t.firstName} ${t.lastName}`.toLowerCase(),c=`${t.lastName}, ${t.firstName}`.toLowerCase();return t.firstName.toLowerCase().includes(s)||t.lastName.toLowerCase().includes(s)||r.includes(s)||c.includes(s)}),b=m.filter(t=>{const s=t.contracted==="Y";return!(s&&!g||!s&&!p)}),l=new Map;b.forEach(t=>{const s=t.militaryScienceLevel||"Unknown";l.has(s)||l.set(s,[]),l.get(s).push(t)}),l.forEach((t,s)=>{t.sort((r,c)=>{const y=r.lastName.localeCompare(c.lastName);return y!==0?y:r.firstName.localeCompare(c.firstName)})});const f=Array.from(l.keys()).sort((t,s)=>{if(t==="Unknown")return 1;if(s==="Unknown")return-1;const r=parseInt(t.replace("MS","")),c=parseInt(s.replace("MS",""));return r-c});return e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-safe-area-inset-bottom",children:[e.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-10 safe-area-inset-top",children:e.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Cadets"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>h(!u),className:"text-sm text-blue-600 font-medium touch-manipulation px-3 py-2 rounded-lg hover:bg-blue-50 active:bg-blue-100 transition-colors",style:{minHeight:"44px",minWidth:"44px"},children:"Filter"}),e.jsx("button",{onClick:w,className:"text-sm text-blue-600 font-medium touch-manipulation",style:{minHeight:"44px",minWidth:"44px"},children:"Home"})]})]})}),e.jsx("main",{className:"px-4 py-4",children:S?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading..."}):e.jsxs(e.Fragment,{children:[u&&e.jsxs("div",{className:"mb-4 bg-white rounded-lg border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Filters"}),e.jsx("button",{onClick:()=>h(!1),className:"text-gray-500 hover:text-gray-700 touch-manipulation",style:{minHeight:"44px",minWidth:"44px"},children:"âœ•"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Filter by Company"}),e.jsx("div",{className:"space-y-2",children:j.map(t=>e.jsxs("label",{className:"flex items-center cursor-pointer touch-manipulation py-2",children:[e.jsx("input",{type:"checkbox",checked:x.has(t),onChange:()=>U(t),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500 focus:ring-2 cursor-pointer"}),e.jsx("span",{className:"ml-3 text-sm text-gray-900",children:t})]},t))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Filter by Contracted Status"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center cursor-pointer touch-manipulation py-2",children:[e.jsx("input",{type:"checkbox",checked:g,onChange:t=>F(t.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500 focus:ring-2 cursor-pointer"}),e.jsx("span",{className:"ml-3 text-sm text-gray-900",children:"Contracted"})]}),e.jsxs("label",{className:"flex items-center cursor-pointer touch-manipulation py-2",children:[e.jsx("input",{type:"checkbox",checked:p,onChange:t=>L(t.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500 focus:ring-2 cursor-pointer"}),e.jsx("span",{className:"ml-3 text-sm text-gray-900",children:"Uncontracted"})]})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"cadet-search",className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Cadets"}),e.jsx("input",{id:"cadet-search",type:"text",placeholder:"Type a name to search...",value:n,onChange:t=>k(t.target.value),className:"w-full py-3 px-4 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 placeholder-gray-500 bg-white"})]}),e.jsx("button",{onClick:()=>i==null?void 0:i(),className:"w-full py-3 px-4 rounded-lg font-semibold bg-blue-600 text-white hover:bg-blue-700 active:bg-blue-800 touch-manipulation min-h-[44px]",children:"Add Cadet"})]}),e.jsx("div",{className:"space-y-4",children:f.length>0?f.map(t=>{const s=l.get(t);return s.length===0?null:e.jsxs("div",{children:[e.jsx("div",{className:"bg-gray-100 border-b-2 border-gray-300 px-4 py-2 mb-2 rounded-t-lg",children:e.jsx("h3",{className:"font-bold text-gray-900 text-sm",children:t})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:s.map(r=>e.jsx("button",{onClick:()=>C(r.id),className:"w-full px-4 py-3 text-left hover:bg-gray-50 active:bg-gray-100 transition-colors touch-manipulation border-b border-gray-100 last:border-b-0",children:e.jsxs("span",{className:"font-medium text-gray-900",children:[r.lastName,", ",r.firstName]})},r.id))})]},t)}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:n.trim()?"No cadets found matching your search.":"No cadets found."})}),e.jsxs("div",{className:"mt-6 bg-white rounded-lg border border-gray-200 p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Summary"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:n.trim()?"Matching Cadets:":"Total Cadets:"}),e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:b.length})]}),!n.trim()&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Total Contracted:"}),e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:m.filter(t=>t.contracted==="Y").length})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Total Uncontracted:"}),e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:m.filter(t=>t.contracted!=="Y").length})]})]})]})]})]})})]})}export{W as default};
