import{r,j as e}from"./react-vendor-C8iBsMnn.js";import{u as U,a as H}from"./trainingEventService-DxY6O771.js";import{g as L}from"./cadetService-BXy_--2f.js";import"./vendor-C6jWcdt9.js";import"./firebase-vendor-u2jlvS72.js";import"./index-DKB6D4ej.js";function F({eventId:a,onBack:y,onSuccess:v}){const[n,j]=r.useState(""),[l,N]=r.useState(""),[o,C]=r.useState(""),[i,E]=r.useState(""),[c,w]=r.useState(""),[u,S]=r.useState(""),[d,O]=r.useState(""),[m,k]=r.useState(""),[g,D]=r.useState(""),[x,T]=r.useState("in-progress"),[b,A]=r.useState([]),[q,I]=r.useState(!!a);r.useEffect(()=>{async function t(){try{const s=await L("Master");A(s.sort((p,f)=>{const h=p.lastName.localeCompare(f.lastName);return h!==0?h:p.firstName.localeCompare(f.firstName)}))}catch(s){console.error("Error loading cadets:",s)}}t(),a&&I(!1)},[a]);async function P(t){if(t.preventDefault(),!n.trim()||!l){alert("Please fill in all required fields");return}try{const s={name:n.trim(),date:l,planningStatus:x,...o&&{endDate:o},...i&&{hitTime:i},...c&&{oicId:c},...u&&{ncoicId:u},...d.trim()&&{ao:d.trim()},...m.trim()&&{uniform:m.trim()},...g.trim()&&{mission:g.trim()}};a?await U(a,s):await H(s),v()}catch(s){console.error("Error saving event:",s),alert(`Error saving event: ${s instanceof Error?s.message:"Unknown error"}`)}}return q?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"text-gray-600",children:"Loading..."})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-safe-area-inset-bottom",children:[e.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-10 safe-area-inset-top",children:e.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:a?"Edit Event":"Add Event"}),e.jsx("button",{onClick:y,className:"text-sm text-gray-600 font-medium touch-manipulation",style:{minHeight:"44px",minWidth:"44px"},children:"Cancel"})]})}),e.jsx("main",{className:"px-4 py-4",children:e.jsxs("form",{onSubmit:P,className:"bg-white rounded-lg border border-gray-200 p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Event Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:n,onChange:t=>j(t.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter event name"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Start Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:l,onChange:t=>N(t.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date (Optional - for multi-day events)"}),e.jsx("input",{type:"date",value:o,onChange:t=>C(t.target.value),min:l||void 0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hit Time (Optional)"}),e.jsx("input",{type:"time",value:i,onChange:t=>E(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"OIC (Optional)"}),e.jsxs("select",{value:c,onChange:t=>w(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select OIC"}),b.map(t=>e.jsxs("option",{value:t.id,children:[t.lastName,", ",t.firstName]},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"NCOIC (Optional)"}),e.jsxs("select",{value:u,onChange:t=>S(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select NCOIC"}),b.map(t=>e.jsxs("option",{value:t.id,children:[t.lastName,", ",t.firstName]},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"AO (Area of Operations / Location) (Optional)"}),e.jsx("input",{type:"text",value:d,onChange:t=>O(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter area of operations"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Uniform (Optional)"}),e.jsx("input",{type:"text",value:m,onChange:t=>k(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter uniform requirement"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mission (Optional)"}),e.jsx("textarea",{value:g,onChange:t=>D(t.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter mission description"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Planning Status"}),e.jsxs("select",{value:x,onChange:t=>T(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"complete",children:"Complete ✓"}),e.jsx("option",{value:"in-progress",children:"In Progress ◐"}),e.jsx("option",{value:"issues",children:"Issues !"})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"submit",className:"w-full py-3 px-4 rounded-lg font-semibold bg-blue-600 text-white hover:bg-blue-700 active:bg-blue-800 touch-manipulation min-h-[44px]",children:a?"Update Event":"Create Event"})})]})})]})}export{F as default};
